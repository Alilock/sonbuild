(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[155],{1684:function(e,s,t){"use strict";t.r(s);var a=t(4),n=t(17),r=t(2),c=t.n(r),i=t(10),d=t(1),j=t(105),l=t(965),u=t(799),b=t(12),o=t(13),h=function(e){var s=e.messages,t=e.speakerId,a=(e.listenerId,Object(d.useState)({data:[],loading:!0})),r=Object(n.a)(a,2),c=r[0],i=r[1];Object(d.useEffect)((function(){i({data:s.reverse(),loading:!1})}),[s]);var j=c.loading,l=c.data;return j?null:Object(o.jsx)("div",{className:"chats",children:l.map((function(e,a){var n=t===e.user._id,r=(e.user._id,t===e.user._id?{display:"flex",justifyContent:"flex-start"}:{display:"flex",justifyContent:"flex-end"}),c=0!==a&&s[a-1].user._id===e.user._id;return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{children:!c&&Object(o.jsxs)("p",{style:Object(b.a)(Object(b.a)({},r),{fontWeight:"bold"}),children:[e.user.username," - ",t===e.user._id?"Speaker":"Listener"]})}),Object(o.jsx)("div",{style:Object(b.a)(Object(b.a)({},r),{},{marginLeft:n?10:0,marginRight:n?0:10}),children:Object(o.jsx)("p",{children:e.text})})]})}))})};s.default=function(){var e=Object(i.g)().id,s=Object(i.f)(),t=Object(d.useState)({chatSession:null,messages:[]}),r=Object(n.a)(t,2),b=r[0],O=r[1],x=function(){var s=Object(a.a)(c.a.mark((function s(){var t,a,n;return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e,s.next=3,Object(l.a)({chatSessionId:t});case 3:return(a=s.sent)||alert("Hata"),s.next=7,Object(l.b)({chatSessionId:t});case 7:n=s.sent,O({chatSession:a,messages:n});case 9:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();Object(d.useEffect)((function(){x()}),[]);var p=b.chatSession,f=b.messages;return p?Object(o.jsx)("div",{className:"app-user-view",children:Object(o.jsx)(j.ib,{children:Object(o.jsx)(j.B,{xs:12,children:Object(o.jsx)(u.a,{children:Object(o.jsxs)(j.l,{children:[Object(o.jsx)(j.p,{className:"border-bottom",children:Object(o.jsx)(j.v,{tag:"h4",children:"Chat Session"})}),Object(o.jsx)(j.p,{className:"border-bottom",children:Object(o.jsxs)("div",{children:[Object(o.jsxs)("p",{onClick:function(){return s("/aloha/user/view/".concat(p.speaker.id))},children:["Speaker: - ",p.speaker.username]}),Object(o.jsxs)("p",{onClick:function(){return s("/aloha/user/view/".concat(p.listeners[0].id))},children:["Listener : ",p.listeners[0].username]})]})}),Object(o.jsx)(j.m,{className:"py-2 my-25",children:Object(o.jsx)(h,{messages:f,listenerId:p.listenerIds[0],speakerId:p.speakerId})})]})})})})}):null}}}]);