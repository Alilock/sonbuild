(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[157],{1647:function(e,t,a){"use strict";a.r(t);var n=a(17),c=a(1),l=a(12),r=a(532),s=a(507),i=a(105),o=a(146),d=a(165),u=a(509),j=a(506),m=a(24),b=a(510),x=a.n(b),h=(a(525),a(13)),O={companyName:"",cost:null,value:null,expiresAt:null,code:"",currency:"TL",hide:!1},f=[{value:"trendyol",label:"Trendyol"},{value:"sodexo",label:"Sodexo"}],p=function(e){var t=e.open,a=e.toggleSidebar,b=Object(c.useState)(null),p=Object(n.a)(b,2),v=(p[0],p[1],Object(o.b)()),N=Object(s.e)({defaultValues:O}),g=N.control,y=N.setValue,C=N.setError,S=N.handleSubmit,k=N.formState.errors;return Object(h.jsx)(r.a,{size:"lg",open:t,title:"Kupon Yarat",headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:a,onClosed:function(){for(var e in O)y(e,"")},children:Object(h.jsxs)(i.H,{onSubmit:S((function(e){if(e.code.length>0&&e.currency.length>0&&e.cost.length>0&&e.value.length>0&&e.companyName.length>0&&null!==e.expiresAt)a(),v(Object(d.a)(Object(l.a)({},e)));else for(var t in e)null!==e[t]&&0===e[t].length&&C(t,{type:"manual"})})),children:[Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"companyName",children:["\u015eirket \u0130smi ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"companyName",control:g,render:function(e){var t=e.field;return Object(h.jsx)(u.a,{id:"companyName",isClearable:!1,className:"react-select",classNamePrefix:"select",options:f,onChange:function(e){t.onChange(e.value)},theme:j.i,value:null!==t&&void 0!==t&&t.value?Object(m.find)(f,(function(e){return e.value===t.value})):null})}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"code",children:["Kod ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"code",control:g,render:function(e){var t=e.field;return Object(h.jsx)(i.K,Object(l.a)({id:"code",placeholder:"Add the code for the coupon",invalid:k.title&&!0},t))}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"fullName",children:["Kredi Degeri ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"cost",control:g,render:function(e){var t=e.field;return Object(h.jsx)(i.K,Object(l.a)({id:"cost",placeholder:"Add cost of coupon in credits",invalid:k.title&&!0},t))}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"fullName",children:["Kupon Degeri ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"value",control:g,render:function(e){var t=e.field;return Object(h.jsx)(i.K,Object(l.a)({id:"value",placeholder:"Add value of coupon",invalid:k.title&&!0},t))}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"currency",children:["Kupon degeri para cinsi ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"currency",control:g,render:function(e){var t=e.field;return Object(h.jsx)(i.K,Object(l.a)({id:"currency",defaultValue:"TL",placeholder:"Kupon degeri para cinsi",invalid:k.title&&!0},t))}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsx)(i.N,{className:"form-label",for:"expiresAt",children:"Son kullanma tarihi"}),Object(h.jsx)(s.a,{name:"expiresAt",control:g,render:function(e){var t=e.field;return Object(h.jsx)(x.a,{value:t.value,options:{minDate:"today",altInput:!0,altFormat:"j F Y",dateFormat:"d-m-y"},id:"expiresAt",className:"form-control",onChange:function(e){return t.onChange(e)}})}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"hide",children:["Kuponu Gizle ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"hide",control:g,render:function(e){var t=e.field;return Object(h.jsxs)("div",{className:"form-check form-switch",children:[Object(h.jsx)(i.K,Object(l.a)({defaultChecked:t.value,type:"switch",name:"hide",id:"hide"},t)),Object(h.jsx)(i.N,{for:"exampleCustomSwitch",className:"form-check-label",children:"Gizlemek i\xe7in aktifle\u015ftiriniz."})]})}})]}),Object(h.jsx)(i.i,{type:"submit",className:"me-1",color:"primary",children:"Olu\u015ftur"}),Object(h.jsx)(i.i,{type:"reset",color:"secondary",outline:!0,onClick:a,children:"\u0130ptal"})]})})},v=a(78),N=a(519),g=a.n(N),y=[{name:"\u015eirket",sortable:!0,minWidth:"100px",sortField:"companyName",selector:function(e){return e.companyName},cell:function(e){return Object(h.jsx)("span",{className:"text-truncate text-capitalize mb-0",children:e.companyName})}},{name:"Yarat\u0131lma",minWidth:"100px",sortable:!0,sortField:"createdAt",selector:function(e){return e.createdAt},cell:function(e){return Object(h.jsx)("span",{className:"text-capitalize",children:g()(e.createdAt).format("DD/MM/YYYY HH:mm")})}},{name:"SKT",minWidth:"100px",sortable:!0,sortField:"expiresAt",selector:function(e){return e.expiresAt},cell:function(e){return Object(h.jsx)("span",{className:"text-capitalize",children:g()(e.expiresAt).format("DD/MM/YYYY HH:mm")})}},{name:"De\u011fer",minWidth:"100px",sortable:!0,sortField:"value",selector:function(e){return e.value},cell:function(e){return Object(h.jsxs)("span",{className:"text-capitalize",children:[e.value," ",e.currency]})}},{name:"Kod",minWidth:"100px",sortable:!0,sortField:"code",selector:function(e){return e.code},cell:function(e){return Object(h.jsx)("span",{className:"text-capitalize",children:e.code})}},{name:"G\xf6sterim",minWidth:"100px",sortable:!0,sortField:"hide",selector:function(e){return e.hide},cell:function(e){return Object(h.jsx)(i.f,{color:e.hide?"danger":"success",children:e.hide?"Gizli":"G\xf6steriliyor"})}},{name:"Durum",minWidth:"100px",sortable:!0,sortField:"bookedBy",selector:function(e){return e.bookedBy},cell:function(e){return Object(h.jsx)(i.f,{color:e.bookedBy?"danger":"success",children:e.bookedBy?"Alindi":"Mevcut"})}},{name:"Alan",minWidth:"100px",sortable:!0,sortField:"user",selector:function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.username},cell:function(e){var t;return Object(h.jsx)("span",{children:null===(t=e.user)||void 0===t?void 0:t.username})}},{name:"D\xfczenle",sortable:!1,cell:function(e){return Object(h.jsx)(i.i.Ripple,{onClick:function(){return v.a.dispatch(Object(d.f)(e))},color:"flat-primary",children:"D\xfczenle"})}},{name:"Sil",sortable:!1,cell:function(e){return Object(h.jsx)(i.i.Ripple,{onClick:function(){return v.a.dispatch(Object(d.c)(e._id))},color:"flat-danger",children:"Sil"})}}],C=a(514),S=a.n(C),k=a(511),K=a.n(k),A=a(930),w=a(881),P=a(849),F=(a(512),a(521),[{value:"trendyol",label:"Trendyol"},{value:"sodexo",label:"Sodexo"}]),z=function(e){var t=e.open,a=e.toggleSidebar,b=e.item,O=Object(c.useState)(null),f=Object(n.a)(O,2),p=(f[0],f[1],Object(l.a)({},b)),v=Object(o.b)(),N=Object(s.e)({defaultValues:p}),g=N.control,y=N.setValue,C=N.setError,S=N.handleSubmit,k=N.formState.errors;return Object(h.jsx)(r.a,{size:"lg",open:t,title:"Kupon D\xfczenle",headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:a,onClosed:function(){for(var e in p)y(e,"")},children:Object(h.jsxs)(i.H,{onSubmit:S((function(e){if(e.code.length>0&&e.currency.toString().length>0&&e.cost.toString().length>0&&e.value.toString().length>0&&e.companyName.length>0&&null!==e.expiresAt)a(),v(Object(d.g)(Object(l.a)({},e)));else for(var t in e)null!==e[t]&&0===e[t].length&&C(t,{type:"manual"})})),children:[Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"companyName",children:["\u015eirket \u0130smi ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"companyName",control:g,render:function(e){var t=e.field;return Object(h.jsx)(u.a,{id:"companyName",isClearable:!1,className:"react-select",classNamePrefix:"select",options:F,onChange:function(e){t.onChange(e.value)},theme:j.i,value:null!==t&&void 0!==t&&t.value?Object(m.find)(F,(function(e){return e.value===t.value})):null})}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"code",children:["Kod ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"code",control:g,render:function(e){var t=e.field;return Object(h.jsx)(i.K,Object(l.a)({id:"code",placeholder:"Add the code for the coupon",invalid:k.title&&!0},t))}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"fullName",children:["Kredi Degeri ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"cost",control:g,render:function(e){var t=e.field;return Object(h.jsx)(i.K,Object(l.a)({id:"cost",placeholder:"Add cost of coupon in credits",invalid:k.title&&!0},t))}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"fullName",children:["Kupon Degeri ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"value",control:g,render:function(e){var t=e.field;return Object(h.jsx)(i.K,Object(l.a)({id:"value",placeholder:"Add value of coupon",invalid:k.title&&!0},t))}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"currency",children:["Kupon degeri para cinsi ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"currency",control:g,render:function(e){var t=e.field;return Object(h.jsx)(i.K,Object(l.a)({id:"currency",defaultValue:"TL",placeholder:"Kupon degeri para cinsi",invalid:k.title&&!0},t))}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsx)(i.N,{className:"form-label",for:"expiresAt",children:"Son kullanma tarihi"}),Object(h.jsx)(s.a,{name:"expiresAt",control:g,render:function(e){var t=e.field;return Object(h.jsx)(x.a,{value:t.value,options:{minDate:"today",altInput:!0,altFormat:"j F Y",dateFormat:"d-m-y"},id:"expiresAt",className:"form-control",onChange:function(e){return t.onChange(e)}})}})]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsxs)(i.N,{className:"form-label",for:"hide",children:["Kuponu Gizle ",Object(h.jsx)("span",{className:"text-danger",children:"*"})]}),Object(h.jsx)(s.a,{name:"hide",control:g,render:function(e){var t=e.field;return Object(h.jsxs)("div",{className:"form-check form-switch",children:[Object(h.jsx)(i.K,Object(l.a)({defaultChecked:t.value,type:"switch",name:"hide",id:"hide"},t)),Object(h.jsx)(i.N,{for:"exampleCustomSwitch",className:"form-check-label",children:"Gizlemek i\xe7in aktifle\u015ftiriniz."})]})}})]}),Object(h.jsx)(i.i,{type:"submit",className:"me-1",color:"primary",children:"Kaydet"}),Object(h.jsx)(i.i,{type:"reset",color:"secondary",outline:!0,onClick:a,children:"\u0130ptal"})]})})},D=function(e){var t=e.store,a=e.toggleSidebar,n=e.handlePerPage,c=e.rowsPerPage,l=e.handleFilter,r=e.searchTerm;function s(e){var a=document.createElement("a"),n=function(e){var a,n=Object.keys(t.data[0]);return a="",a+=n.join(","),a+="\n",e.forEach((function(e){var t=0;n.forEach((function(n){t>0&&(a+=","),a+=e[n],t++})),a+="\n"})),a}(e);if(null!==n){n.match(/^data:text\/csv/i)||(n="data:text/csv;charset=utf-8,".concat(n)),a.setAttribute("href",encodeURI(n)),a.setAttribute("download","export.csv"),a.click()}}return Object(h.jsx)("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:Object(h.jsxs)(i.ib,{children:[Object(h.jsx)(i.B,{xl:"6",className:"d-flex align-items-center p-0",children:Object(h.jsxs)("div",{className:"d-flex align-items-center w-100",children:[Object(h.jsx)("label",{htmlFor:"rows-per-page",children:"Sayfa Ba\u015f\u0131na"}),Object(h.jsxs)(i.K,{className:"mx-50",type:"select",id:"rows-per-page",value:c,onChange:n,style:{width:"5rem"},children:[Object(h.jsx)("option",{value:"10",children:"10"}),Object(h.jsx)("option",{value:"25",children:"25"}),Object(h.jsx)("option",{value:"50",children:"50"})]}),Object(h.jsx)("label",{htmlFor:"rows-per-page",children:"\xd6\u011fe"})]})}),Object(h.jsxs)(i.B,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[Object(h.jsxs)("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[Object(h.jsx)("label",{className:"mb-0",htmlFor:"search-invoice",children:"Ara:"}),Object(h.jsx)(i.K,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:r,onChange:function(e){return l(e.target.value)}})]}),Object(h.jsxs)("div",{className:"d-flex align-items-center table-header-actions",children:[Object(h.jsxs)(i.wb,{className:"me-1",children:[Object(h.jsxs)(i.G,{color:"secondary",caret:!0,outline:!0,children:[Object(h.jsx)(A.a,{className:"font-small-4 me-50"}),Object(h.jsx)("span",{className:"align-middle",children:"Export"})]}),Object(h.jsx)(i.F,{children:Object(h.jsxs)(i.E,{className:"w-100",onClick:function(){return s(t.data)},children:[Object(h.jsx)(w.a,{className:"font-small-4 me-50"}),Object(h.jsx)("span",{className:"align-middle",children:"CSV"})]})})]}),Object(h.jsx)(i.i,{className:"add-new-user",color:"primary",onClick:a,children:"Kupon Yarat"})]})]})]})})},Y=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.alohaCoupons})),a=Object(c.useState)("desc"),l=Object(n.a)(a,2),r=l[0],s=l[1],u=Object(c.useState)(""),j=Object(n.a)(u,2),m=j[0],b=j[1],x=Object(c.useState)(1),O=Object(n.a)(x,2),f=O[0],v=O[1],N=Object(c.useState)("_id"),g=Object(n.a)(N,2),C=g[0],k=g[1],A=Object(c.useState)(10),w=Object(n.a)(A,2),F=w[0],Y=w[1],T=Object(c.useState)(!1),E=Object(n.a)(T,2),H=E[0],G=E[1],L=Object(c.useState)(!1),W=Object(n.a)(L,2),B=W[0],V=W[1],q=Object(c.useState)({value:"",label:"Select Role"}),M=Object(n.a)(q,2),I=M[0],R=(M[1],Object(c.useState)({value:"",label:"Select Plan"})),J=Object(n.a)(R,2),_=J[0],U=(J[1],Object(c.useState)({value:"",label:"Select Status",number:0})),Q=Object(n.a)(U,2),X=Q[0],Z=(Q[1],function(){return G(!H)});Object(c.useEffect)((function(){V(!!t.editCouponObject)}),[t.editCouponObject]),Object(c.useEffect)((function(){e(Object(d.d)()).then((function(){e(Object(d.e)({sort:r,sortColumn:C,q:m,page:f,perPage:F,role:I.value,status:X.value,currentPlan:_.value}))}))}),[e,t.data.length,r,C,f,m]);return Object(h.jsxs)(c.Fragment,{children:[Object(h.jsx)(i.l,{className:"overflow-hidden",children:Object(h.jsx)("div",{className:"react-dataTable",children:Object(h.jsx)(K.a,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:y,onSort:function(t,a){s(a),k(t.sortField),e(Object(d.e)({sort:r,sortColumn:C,q:m,page:f,perPage:F,role:I.value,status:X.value,currentPlan:_.value}))},sortIcon:Object(h.jsx)(P.a,{}),className:"react-dataTable",paginationComponent:function(){var a=Number(Math.ceil(t.total/F));return Object(h.jsx)(S.a,{previousLabel:"",nextLabel:"",pageCount:a||1,activeClassName:"active",forcePage:0!==f?f-1:0,onPageChange:function(t){return function(t){e(Object(d.e)({sort:r,sortColumn:C,q:m,perPage:F,page:t.selected+1,role:I.value,status:X.value,currentPlan:_.value})),v(t.selected+1)}(t)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},data:function(){var e={role:I.value,currentPlan:_.value,status:X.value,q:m},a=Object.keys(e).some((function(t){return e[t].length>0}));return t.data.length>0?t.data:0===t.data.length&&a?[]:t.allData.slice(0,F)}(),subHeaderComponent:Object(h.jsx)(D,{store:t,searchTerm:m,rowsPerPage:F,handleFilter:function(t){b(t),e(Object(d.e)({sort:r,q:t,sortColumn:C,page:f,perPage:F,role:I.value,status:X.value,currentPlan:_.value}))},handlePerPage:function(t){var a=parseInt(t.currentTarget.value);e(Object(d.e)({sort:r,sortColumn:C,q:m,perPage:a,page:f,role:I.value,currentPlan:_.value,status:X.value})),Y(a)},toggleSidebar:Z})})})}),Object(h.jsx)(p,{open:H,toggleSidebar:Z}),t.editCouponObject&&Object(h.jsx)(z,{open:B,toggleSidebar:function(){V(!B),e(Object(d.f)(null))},item:t.editCouponObject})]})};a(534),t.default=function(){return Object(h.jsx)("div",{className:"app-user-list",children:Object(h.jsx)(Y,{})})}}}]);